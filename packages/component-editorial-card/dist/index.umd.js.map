{"version":3,"file":"index.umd.js","sources":["../src/react/EditorialCard.jsx","../src/js/modules/bling.js","../src/js/modules/helpers.js","../src/js/submitPostcodeHandler.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n// import '../css/EditorialCard.pcss';\n\nconst EditorialCard = ({ title, text, link, type, testId }) => {\n  const tagAttributes = {\n    className: \"coop coop-c-editorialcard coop-c-editorialcard--horizontal\",\n    role: type === \"warn\" || type === \"error\" ? \"alert\" : \"status\",\n  };\n\n  return (\n    <div\n      data-testid={testId}\n      className={tagAttributes.className}\n      role={tagAttributes.role}\n    >\n      <div className=\"coop-c-editorialcard__inner \">\n        <h3 className=\"coop-c-editorialcard__title coop-c-notification__heading\">{title}</h3>\n        <p className=\"coop-c-notification__p\">\n          {link ? (\n            <a href={link} className=\"coop-c-notification__link\">\n              {text}\n            </a>\n          ) : (\n            text\n          )}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nEditorialCard.defaultProps = {\n  type: \"info\",\n};\n\nEditorialCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  link: PropTypes.string,\n  type: PropTypes.oneOf([\"info\", \"warn\", \"error\", \"success\"]),\n  testId: PropTypes.string,\n};\n\nexport default EditorialCard;\n","/* eslint-disable func-names */\n/* eslint-disable no-multi-assign */\n\nconst $ = document.querySelector.bind(document);\nconst $$ = document.querySelectorAll.bind(document);\n\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\n\nNodeList.prototype.__proto__ = Array.prototype; // eslint-disable-line\n\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach((elem) => {\n    elem.on(name, fn);\n  });\n};\n\nexport { $, $$ };\n","import { $ } from './bling';\n\nfunction validatePostcode(getPostcode) {\n  const validator = new RegExp(/\\b((?:(?:gir)|(?:[a-pr-uwyz])(?:(?:[0-9](?:[a-hjkpstuw]|[0-9])?)|(?:[a-hk-y][0-9](?:[0-9]|[abehmnprv-y])?)))) ?([0-9][abd-hjlnp-uw-z]{2})\\b/i);\n  const valid = validator.test(getPostcode);\n  return valid;\n}\n\nfunction showError(selector, message, parentElement) {\n  const errorMessageClass = `${selector}__error`;\n  const $errorMessageSelector = $(`.${errorMessageClass}`);\n  if ($errorMessageSelector) {\n    $errorMessageSelector.innerHTML = message;\n  } else {\n    const errorMessage = document.createElement('p');\n    errorMessage.classList.add(errorMessageClass);\n    errorMessage.setAttribute('role', 'alert');\n    errorMessage.innerHTML = message;\n    $(parentElement).appendChild(errorMessage);\n  }\n}\n\nexport { validatePostcode, showError };\n","import { $ } from './modules/bling';\nimport { validatePostcode, showError } from './modules/helpers';\n\nfunction submitPostcode(e) {\n  e.preventDefault();\n  const postcodeInput = $('input#coop-c-postcode__search');\n  const check = validatePostcode(postcodeInput.value);\n  if (check) {\n    window.location.replace(\n      `${window.SHOP_URL}?postcode=${postcodeInput.value}&utm_source=${postcodeInput.dataset.utmSource}&utm_medium=${postcodeInput.dataset.utmMedium}&utm_campaign=${postcodeInput.dataset.utmCampaign}`\n    );\n  } else {\n    $('div.coop-c-postcode').classList.add('error');\n    const selector = 'coop-c-postcode';\n    const parentElement = '.coop-c-postcode__inner';\n    showError(\n      selector,\n      '<span class=\"coop-u-red-mid\">Please enter a valid postcode format</span> <br /> For example  M4 4BE',\n      parentElement\n    );\n  }\n}\n\nfunction postcode(form) {\n  if (!form) {\n    return;\n  }\n  form.addEventListener('submit', submitPostcode);\n}\n\nexport default postcode;\n"],"names":["EditorialCard","title","text","link","type","testId","tagAttributes","className","role","React","defaultProps","propTypes","PropTypes","string","isRequired","oneOf","$","document","querySelector","bind","querySelectorAll","Node","prototype","on","window","name","fn","addEventListener","NodeList","__proto__","Array","forEach","elem","validatePostcode","getPostcode","validator","RegExp","valid","test","showError","selector","message","parentElement","errorMessageClass","$errorMessageSelector","innerHTML","errorMessage","createElement","classList","add","setAttribute","appendChild","submitPostcode","e","preventDefault","postcodeInput","check","value","location","replace","SHOP_URL","dataset","utmSource","utmMedium","utmCampaign","postcode","form"],"mappings":"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"}