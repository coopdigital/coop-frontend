{"version":3,"sources":["../../src/js/submitPostcodeHandler.js"],"names":["require","$","validatePostcode","showError","submitPostcode","e","preventDefault","postcodeInput","check","value","window","location","replace","SHOP_URL","dataset","utmSource","utmMedium","utmCampaign","classList","add","selector","parentElement","postcode","form","addEventListener","module","exports"],"mappings":";;;;;;AAAA,eAAcA,OAAO,CAAC,iBAAD,CAArB;AAAA,IAAQC,CAAR,YAAQA,CAAR;;AACA,gBAAwCD,OAAO,CAAC,mBAAD,CAA/C;AAAA,IAAQE,gBAAR,aAAQA,gBAAR;AAAA,IAA0BC,SAA1B,aAA0BA,SAA1B;;AAEA,SAASC,cAAT,CAAwBC,CAAxB,EAA2B;AACzBA,EAAAA,CAAC,CAACC,cAAF;AACA,MAAMC,aAAa,GAAGN,CAAC,CAAC,+BAAD,CAAvB;AACA,MAAMO,KAAK,GAAGN,gBAAgB,CAACK,aAAa,CAACE,KAAf,CAA9B;;AACA,MAAID,KAAJ,EAAW;AACTE,IAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CACKF,MAAM,CAACG,QADZ,kBACiCN,aAAa,CAACE,KAD/C,oBACmEF,aAAa,CAACO,OAAd,CAAsBC,SADzF,oBACiHR,aAAa,CAACO,OAAd,CAAsBE,SADvI,sBACiKT,aAAa,CAACO,OAAd,CAAsBG,WADvL;AAGD,GAJD,MAIO;AACLhB,IAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBiB,SAAzB,CAAmCC,GAAnC,CAAuC,OAAvC;AACA,QAAMC,QAAQ,GAAG,iBAAjB;AACA,QAAMC,aAAa,GAAG,yBAAtB;AACAlB,IAAAA,SAAS,CACPiB,QADO,EAEP,qGAFO,EAGPC,aAHO,CAAT;AAKD;AACF;;AAED,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,MAAI,CAACA,IAAL,EAAW;AACT;AACD;;AACDA,EAAAA,IAAI,CAACC,gBAAL,CAAsB,QAAtB,EAAgCpB,cAAhC;AACD;;AAEDqB,MAAM,CAACC,OAAP,GAAiBJ,QAAjB","sourcesContent":["const { $ } = require('./modules/bling');\nconst { validatePostcode, showError } = require('./modules/helpers');\n\nfunction submitPostcode(e) {\n  e.preventDefault();\n  const postcodeInput = $('input#coop-c-postcode__search');\n  const check = validatePostcode(postcodeInput.value);\n  if (check) {\n    window.location.replace(\n      `${window.SHOP_URL}?postcode=${postcodeInput.value}&utm_source=${postcodeInput.dataset.utmSource}&utm_medium=${postcodeInput.dataset.utmMedium}&utm_campaign=${postcodeInput.dataset.utmCampaign}`\n    );\n  } else {\n    $('div.coop-c-postcode').classList.add('error');\n    const selector = 'coop-c-postcode';\n    const parentElement = '.coop-c-postcode__inner';\n    showError(\n      selector,\n      '<span class=\"coop-u-red-mid\">Please enter a valid postcode format</span> <br /> For example  M4 4BE',\n      parentElement\n    );\n  }\n}\n\nfunction postcode(form) {\n  if (!form) {\n    return;\n  }\n  form.addEventListener('submit', submitPostcode);\n}\n\nmodule.exports = postcode;\n"],"file":"submitPostcodeHandler.js"}