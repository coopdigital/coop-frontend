{"version":3,"file":"index.js","sources":["../src/js/modules/bling.js","../src/js/modules/helpers.js","../src/js/submitPostcodeHandler.js","../src/react/EditorialCard.jsx"],"sourcesContent":["/* eslint-disable func-names */\n/* eslint-disable no-multi-assign */\n\nconst $ = document.querySelector.bind(document);\nconst $$ = document.querySelectorAll.bind(document);\n\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\n\nNodeList.prototype.__proto__ = Array.prototype; // eslint-disable-line\n\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach((elem) => {\n    elem.on(name, fn);\n  });\n};\n\nexport { $, $$ };\n","import { $ } from './bling';\n\nfunction validatePostcode(getPostcode) {\n  const validator = new RegExp(/\\b((?:(?:gir)|(?:[a-pr-uwyz])(?:(?:[0-9](?:[a-hjkpstuw]|[0-9])?)|(?:[a-hk-y][0-9](?:[0-9]|[abehmnprv-y])?)))) ?([0-9][abd-hjlnp-uw-z]{2})\\b/i);\n  const valid = validator.test(getPostcode);\n  return valid;\n}\n\nfunction showError(selector, message, parentElement) {\n  const errorMessageClass = `${selector}__error`;\n  const $errorMessageSelector = $(`.${errorMessageClass}`);\n  if ($errorMessageSelector) {\n    $errorMessageSelector.innerHTML = message;\n  } else {\n    const errorMessage = document.createElement('p');\n    errorMessage.classList.add(errorMessageClass);\n    errorMessage.setAttribute('role', 'alert');\n    errorMessage.innerHTML = message;\n    $(parentElement).appendChild(errorMessage);\n  }\n}\n\nexport { validatePostcode, showError };\n","import { $ } from './modules/bling';\nimport { validatePostcode, showError } from './modules/helpers';\n\nfunction submitPostcode(e) {\n  e.preventDefault();\n  const postcodeInput = $('input#coop-c-postcode__search');\n  const check = validatePostcode(postcodeInput.value);\n  if (check) {\n    window.location.replace(\n      `${window.SHOP_URL}?postcode=${postcodeInput.value}&utm_source=${postcodeInput.dataset.utmSource}&utm_medium=${postcodeInput.dataset.utmMedium}&utm_campaign=${postcodeInput.dataset.utmCampaign}`\n    );\n  } else {\n    $('div.coop-c-postcode').classList.add('error');\n    const selector = 'coop-c-postcode';\n    const parentElement = '.coop-c-postcode__inner';\n    showError(\n      selector,\n      '<span class=\"coop-u-red-mid\">Please enter a valid postcode format</span> <br /> For example  M4 4BE',\n      parentElement\n    );\n  }\n}\n\nfunction postcode(form) {\n  if (!form) {\n    return;\n  }\n  form.addEventListener('submit', submitPostcode);\n}\n\nexport default postcode;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n// import '../css/EditorialCard.css';\n\nconst EditorialCard = ({ title, text, link, type, testId }) => {\n  const tagAttributes = {\n    className: \"coop coop-c-editorialcard coop-c-editorialcard--horizontal\",\n    role: type === \"warn\" || type === \"error\" ? \"alert\" : \"status\",\n  };\n\n  return (\n    <div\n      data-testid={testId}\n      className={tagAttributes.className}\n      role={tagAttributes.role}\n    >\n      <div className=\"coop-c-editorialcard__inner \">\n        <h3 className=\"coop-c-editorialcard__title coop-c-notification__heading\">{title}</h3>\n        <p className=\"coop-c-notification__p\">\n          {link ? (\n            <a href={link} className=\"coop-c-notification__link\">\n              {text}\n            </a>\n          ) : (\n            text\n          )}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nEditorialCard.defaultProps = {\n  type: \"info\",\n};\n\nEditorialCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  link: PropTypes.string,\n  type: PropTypes.oneOf([\"info\", \"warn\", \"error\", \"success\"]),\n  testId: PropTypes.string,\n};\n\nexport default EditorialCard;\n"],"names":["$","document","querySelector","bind","querySelectorAll","Node","prototype","on","window","name","fn","addEventListener","NodeList","__proto__","Array","forEach","elem","validatePostcode","getPostcode","validator","RegExp","valid","test","showError","selector","message","parentElement","errorMessageClass","$errorMessageSelector","innerHTML","errorMessage","createElement","classList","add","setAttribute","appendChild","submitPostcode","e","preventDefault","postcodeInput","check","value","location","replace","SHOP_URL","dataset","utmSource","utmMedium","utmCampaign","postcode","form","EditorialCard","title","text","link","type","testId","tagAttributes","className","role","defaultProps","propTypes","PropTypes","string","isRequired","oneOf"],"mappings":"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"}