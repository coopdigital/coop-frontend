{"version":3,"sources":["../../src/examples/validation-demo.mjs"],"names":["form","document","getElementById","fullName","emailAddress","button","querySelector","summary","ValidationSummary","addEventListener","event","preventDefault","dataset","busy","errors","required","invalid","validity","customError","push","id","message","validationMessage","toLowerCase","length","setErrors","reset","setTimeout"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AAEA;AACA,IAAMA,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAb;AACA,IAAMC,QAAQ,GAAGF,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,CAAjB;AACA,IAAME,YAAY,GAAGH,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAArB;AACA,IAAMG,MAAM,GAAGL,IAAI,CAACM,aAAL,CAAmB,QAAnB,CAAf,C,CAEA;;AACA,IAAMC,OAAO,GAAG,IAAIC,eAAJ,CAAsB,qBAAtB,CAAhB,C,CAEA;;AACAR,IAAI,CAACS,gBAAL,CAAsB,QAAtB;AAAA,qFAAgC,kBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9BA,YAAAA,KAAK,CAACC,cAAN,GAD8B,CAG9B;;AAH8B,iBAI1BX,IAAI,CAACY,OAAL,CAAaC,IAJa;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAQxBC,YAAAA,MARwB,GAQf,EARe,EAU9B;;AACA,iCAASX,QAAT,EAAmB;AACjBY,cAAAA,QAAQ,EAAE,sBADO;AAEjBC,cAAAA,OAAO,EAAE;AAFQ,aAAnB,EAX8B,CAgB9B;;AACA,gBAAIb,QAAQ,CAACc,QAAT,CAAkBC,WAAtB,EAAmC;AACjCJ,cAAAA,MAAM,CAACK,IAAP,CAAY;AACVC,gBAAAA,EAAE,EAAEjB,QAAQ,CAACiB,EADH;AAEVC,gBAAAA,OAAO,EAAElB,QAAQ,CAACmB,iBAAT,CAA2BC,WAA3B;AAFC,eAAZ;AAID,aAtB6B,CAwB9B;;;AACA,iCAASnB,YAAT,EAAuB;AACrBW,cAAAA,QAAQ,EAAE,0BADW;AAErBC,cAAAA,OAAO,EAAE;AAFY,aAAvB,EAzB8B,CA8B9B;;AACA,gBAAIZ,YAAY,CAACa,QAAb,CAAsBC,WAA1B,EAAuC;AACrCJ,cAAAA,MAAM,CAACK,IAAP,CAAY;AACVC,gBAAAA,EAAE,EAAEhB,YAAY,CAACgB,EADP;AAEVC,gBAAAA,OAAO,EAAEjB,YAAY,CAACkB,iBAAb,CAA+BC,WAA/B;AAFC,eAAZ;AAID,aApC6B,CAsC9B;;;AAtC8B,iBAuC1BT,MAAM,CAACU,MAvCmB;AAAA;AAAA;AAAA;;AAwC5BjB,YAAAA,OAAO,CAACkB,SAAR,CAAkBX,MAAlB;AAxC4B;AAAA;;AAAA;AA0C5BP,YAAAA,OAAO,CAACmB,KAAR,GA1C4B,CA4C5B;;AACA1B,YAAAA,IAAI,CAACY,OAAL,CAAaC,IAAb,GAAoB,IAApB;AA7C4B;AAAA,mBA8CtB,sBAAcR,MAAd,CA9CsB;;AAAA;AAgD5B;AACAsB,YAAAA,UAAU,uFAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACH,oBAAYtB,MAAZ,CADG;;AAAA;AAET,6BAAOL,IAAI,CAACY,OAAL,CAAaC,IAApB;;AAFS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAD,IAGP,IAHO,CAAV;;AAjD4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhC;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { reset as buttonReset, loading as buttonLoading } from '@coopdigital/foundations-buttons/src/buttons.mjs';\nimport { validate } from '../validation/index.mjs';\nimport ValidationSummary from '../validation/summary/index.mjs';\n\n// Form elements\nconst form = document.getElementById('validation-demo');\nconst fullName = document.getElementById('validation-demo-name');\nconst emailAddress = document.getElementById('validation-demo-email');\nconst button = form.querySelector('button');\n\n// Validation summary\nconst summary = new ValidationSummary('validation-demo-box');\n\n// Validate on submit\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  // Prevent double submit\n  if (form.dataset.busy) {\n    return;\n  }\n\n  const errors = [];\n\n  // Full name, validate\n  validate(fullName, {\n    required: 'Enter your full name',\n    invalid: 'Enter a valid full name',\n  });\n\n  // Full name, validation summary link\n  if (fullName.validity.customError) {\n    errors.push({\n      id: fullName.id,\n      message: fullName.validationMessage.toLowerCase(),\n    });\n  }\n\n  // Email address, validate\n  validate(emailAddress, {\n    required: 'Enter your email address',\n    invalid: 'Enter a valid email address',\n  });\n\n  // Email address, validation summary link\n  if (emailAddress.validity.customError) {\n    errors.push({\n      id: emailAddress.id,\n      message: emailAddress.validationMessage.toLowerCase(),\n    });\n  }\n\n  // Show or clear errors\n  if (errors.length) {\n    summary.setErrors(errors);\n  } else {\n    summary.reset();\n\n    // Pretend to submit\n    form.dataset.busy = true;\n    await buttonLoading(button);\n\n    // Reset button\n    setTimeout(async () => {\n      await buttonReset(button);\n      delete form.dataset.busy;\n    }, 3000);\n  }\n});\n"],"file":"validation-demo.js"}