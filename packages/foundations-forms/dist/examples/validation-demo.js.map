{"version":3,"sources":["../../src/examples/validation-demo.mjs"],"names":["form","document","getElementById","fullName","emailAddress","button","querySelector","summary","ValidationSummary","addEventListener","event","errors","dataset","busy","required","invalid","validity","customError","push","id","message","validationMessage","toLowerCase","preventDefault","length","setErrors","reset","setTimeout"],"mappings":";;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;AACA,IAAMA,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAb;AACA,IAAMC,QAAQ,GAAGF,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,CAAjB;AACA,IAAME,YAAY,GAAGH,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAArB;AACA,IAAMG,MAAM,GAAGL,IAAI,CAACM,aAAL,CAAmB,QAAnB,CAAf,C,CAEA;;AACA,IAAMC,OAAO,GAAG,IAAIC,eAAJ,CAAsB,qBAAtB,CAAhB,C,CAEA;;AACAR,IAAI,CAACS,gBAAL,CAAsB,QAAtB;AAAA,qFAAgC,kBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACxBC,YAAAA,MADwB,GACf,EADe,EAG9B;;AAH8B,iBAI1BX,IAAI,CAACY,OAAL,CAAaC,IAJa;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAQ9B;AACA,iCAASV,QAAT,EAAmB;AACjBW,cAAAA,QAAQ,EAAE,sBADO;AAEjBC,cAAAA,OAAO,EAAE;AAFQ,aAAnB,EAT8B,CAc9B;;AACA,gBAAIZ,QAAQ,CAACa,QAAT,CAAkBC,WAAtB,EAAmC;AACjCN,cAAAA,MAAM,CAACO,IAAP,CAAY;AACVC,gBAAAA,EAAE,EAAEhB,QAAQ,CAACgB,EADH;AAEVC,gBAAAA,OAAO,EAAEjB,QAAQ,CAACkB,iBAAT,CAA2BC,WAA3B;AAFC,eAAZ;AAID,aApB6B,CAsB9B;;;AACA,iCAASlB,YAAT,EAAuB;AACrBU,cAAAA,QAAQ,EAAE,0BADW;AAErBC,cAAAA,OAAO,EAAE;AAFY,aAAvB,EAvB8B,CA4B9B;;AACA,gBAAIX,YAAY,CAACY,QAAb,CAAsBC,WAA1B,EAAuC;AACrCN,cAAAA,MAAM,CAACO,IAAP,CAAY;AACVC,gBAAAA,EAAE,EAAEf,YAAY,CAACe,EADP;AAEVC,gBAAAA,OAAO,EAAEhB,YAAY,CAACiB,iBAAb,CAA+BC,WAA/B;AAFC,eAAZ;AAID,aAlC6B,CAoC9B;;;AACAZ,YAAAA,KAAK,CAACa,cAAN,GArC8B,CAuC9B;;AAvC8B,iBAwC1BZ,MAAM,CAACa,MAxCmB;AAAA;AAAA;AAAA;;AAyC5BjB,YAAAA,OAAO,CAACkB,SAAR,CAAkBd,MAAlB;AAzC4B;AAAA;;AAAA;AA2C5BJ,YAAAA,OAAO,CAACmB,KAAR,GA3C4B,CA6C5B;;AACA1B,YAAAA,IAAI,CAACY,OAAL,CAAaC,IAAb,GAAoB,IAApB;AA9C4B;AAAA,mBA+CtB,sBAAcR,MAAd,CA/CsB;;AAAA;AAiD5B;AACAsB,YAAAA,UAAU,uFAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACH,oBAAYtB,MAAZ,CADG;;AAAA;AAET,6BAAOL,IAAI,CAACY,OAAL,CAAaC,IAApB;;AAFS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAD,IAGP,IAHO,CAAV;;AAlD4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhC;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { reset as buttonReset, loading as buttonLoading } from '@coopdigital/foundations-buttons/dist/buttons.js';\nimport { validate } from '../validation/index.mjs';\nimport ValidationSummary from '../validation/summary/index.mjs';\n\n// Form elements\nconst form = document.getElementById('validation-demo');\nconst fullName = document.getElementById('validation-demo-name');\nconst emailAddress = document.getElementById('validation-demo-email');\nconst button = form.querySelector('button');\n\n// Validation summary\nconst summary = new ValidationSummary('validation-demo-box');\n\n// Validate on submit\nform.addEventListener('submit', async (event) => {\n  const errors = [];\n\n  // Prevent double submit\n  if (form.dataset.busy) {\n    return;\n  }\n\n  // Full name, validate\n  validate(fullName, {\n    required: 'Enter your full name',\n    invalid: 'Enter a valid full name',\n  });\n\n  // Full name, validation summary link\n  if (fullName.validity.customError) {\n    errors.push({\n      id: fullName.id,\n      message: fullName.validationMessage.toLowerCase(),\n    });\n  }\n\n  // Email address, validate\n  validate(emailAddress, {\n    required: 'Enter your email address',\n    invalid: 'Enter a valid email address',\n  });\n\n  // Email address, validation summary link\n  if (emailAddress.validity.customError) {\n    errors.push({\n      id: emailAddress.id,\n      message: emailAddress.validationMessage.toLowerCase(),\n    });\n  }\n\n  // Don't submit example\n  event.preventDefault();\n\n  // Show or clear errors\n  if (errors.length) {\n    summary.setErrors(errors);\n  } else {\n    summary.reset();\n\n    // Pretend to submit\n    form.dataset.busy = true;\n    await buttonLoading(button);\n\n    // Reset button\n    setTimeout(async () => {\n      await buttonReset(button);\n      delete form.dataset.busy;\n    }, 3000);\n  }\n});\n"],"file":"validation-demo.js"}