{%- macro render(content, cms, config) -%}

	{# If data is valid, set link entry value #}
	{%- if content.data -%}

		{%- set linkEntry = cms.get_entry(content.data.sys.id) -%}

		{# If link is internal get href from target page #}
		{%- if content.type == 'internalLink' -%}
			
			{#  If link entry is valid, render link #}
			{%- if linkEntry.fields.page.data -%}

				{%- set linkTarget = cms.get_entry(linkEntry.fields.page.data.sys.id) -%}

				{# Append full path if not home page #}
				{%- if linkTarget.full_url_path == '/' -%}
					{%- set href = tenant_url_path -%}
				{%- else -%}
					{%- set href = tenant_url_path + linkTarget.full_url_path -%}
				{%- endif -%}

				{# Strip trailing slash #}
				{%- set href = href.rstrip("/") -%}

				{# Append anchor if available #}
				{%- if linkEntry.fields.anchor.data -%}
					{%- set href = href + "#" + linkEntry.fields.anchor.data -%}
				{%- endif -%}
			
			{% endif %}
		
		{# If link is external get href from content #}
		{%- elif content.type == 'externalLink' -%}

			{% if content.fields.url.data %}
				{%- set href = content.fields.url.data -%}
			{% endif %}
		{%- endif -%}


		{# --------------------------------------
		# Render the link
		-------------------------------------- #}
		<a
			class="{{ config.classNames or 'coop-t-link' }}"
			href="{{ href }}"
			title="{{ linkEntry.fields.title.data }}"
			data-contenttype="{{ config.contentType }}"
			data-contentparent="{{ config.contentParent }}"
			data-linktext="{{ linkEntry.fields.title.data }}">

			{# Display icon before anchor text if required #}
			{%- if config.icon -%}

				<span class="{{ config.iconClass if config.iconClass else 'coop-t-link__icon' }}" aria-hidden="true">
					{%- set iconName = config.icon | lower | replace(" ","-") -%}
					{%- set svgClass = config.svgClass if config.svgClass else 'coop-t-link__svg' -%}
					
					{{ icon.render(iconName, svgClass) }}
				</span>
			{%- endif -%}

			{# Display anchor text #}
			<span class="coop-t-link__anchor">{{ linkEntry.fields.title.data }}</span>

			{# Display a chevron if required #}
			{%- if config.displayChevron -%}
				{%- import '/shared-component--icon/src/icon.html' as icon -%}

				{{ icon.render('arrow-right', 'coop-t-link__icon') }}
			{%- endif -%}
		</a>

	{%- endif -%}
{%- endmacro -%}
